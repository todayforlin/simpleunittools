---
const title = "Compound Interest Calculator (Investing)";
const description =
  "Calculate investment growth with compounding. Includes contributions (monthly/annual), APY, compounding frequency, inflation-adjusted results, a year-by-year table, and FAQ.";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />

    <style>
      :root{
        --bg:#f5f7fb;
        --card:#ffffff;
        --text:#0f172a;
        --muted:#64748b;
        --line:#e5e7eb;
        --primary:#2563eb;
        --primary-2:#1e40af;
        --soft:#eef2ff;
        --shadow:0 10px 26px rgba(15,23,42,.10);
        --radius:14px;
        --radius-sm:12px;
        --ok:#16a34a;
        --wait:#f59e0b;
        --bad:#ef4444;
      }

      *{ box-sizing:border-box; }
      body{
        margin:0;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
        background:var(--bg);
        color:var(--text);
      }
      .wrap{ max-width:1100px; margin:22px auto; padding:0 16px 32px; }
      .page-title{
        display:flex; align-items:center; gap:10px;
        font-size:20px; font-weight:900;
        margin:6px 0 10px; color:#111827;
      }
      .page-title .icon{
        width:32px;height:32px;border-radius:10px;
        background:linear-gradient(135deg,var(--primary),#60a5fa);
        box-shadow:0 10px 18px rgba(37,99,235,.25);
        display:flex;align-items:center;justify-content:center;
        color:#fff;font-weight:950;
      }
      .subtitle{ margin:0 0 14px; color:var(--muted); font-size:14px; }

      .card{
        background:var(--card);
        border:1px solid var(--line);
        border-radius:var(--radius);
        box-shadow:var(--shadow);
        overflow:hidden;
      }
      .tabs{
        display:flex; gap:0; border-bottom:1px solid var(--line);
        background:#fff; padding:10px 10px 0; overflow-x:auto;
      }
      .tab{
        appearance:none;
        border:1px solid var(--line);
        border-bottom:none;
        background:#f8fafc;
        color:#334155;
        padding:10px 14px;
        border-top-left-radius:12px;
        border-top-right-radius:12px;
        font-weight:900;
        cursor:pointer;
        white-space:nowrap;
        margin-right:8px;
      }
      .tab[aria-selected="true"]{
        background:#fff;
        color:var(--primary-2);
        box-shadow:0 -1px 0 #fff inset;
      }

      .panel{ padding:16px; }
      [data-panel]{ display:none; }
      [data-panel].active{ display:block; }

      .grid{
        display:grid;
        grid-template-columns:1fr;
        gap:14px;
      }
      @media (min-width: 980px){
        .grid{ grid-template-columns:1.2fr .8fr; align-items:start; }
      }

      .box{
        border:1px solid var(--line);
        border-radius:var(--radius-sm);
        background:#fff;
        padding:14px;
      }
      .box-title{
        display:flex; align-items:flex-end; justify-content:space-between;
        gap:10px; margin-bottom:10px;
      }
      .box-title h2{ margin:0; font-size:14px; font-weight:950; color:#111827; }
      .hint{ font-size:12px; color:var(--muted); }

      .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:flex-end; }
      .field{
        display:flex; flex-direction:column; gap:6px;
        min-width:210px; flex:1 1 210px;
      }
      .field label{ font-size:12px; font-weight:950; color:#111827; }
      .inline{ display:flex; gap:10px; align-items:center; }
      .input{
        border:1px solid var(--line);
        border-radius:12px;
        padding:10px 12px;
        font-size:14px;
        outline:none;
        width:100%;
        background:#fff;
      }
      .input:focus{ border-color:#93c5fd; box-shadow:0 0 0 3px rgba(147,197,253,.35); }
      .mini-sm{ width:170px; flex:0 0 170px; }

      .btn{
        border:1px solid var(--line);
        background:#fff;
        padding:10px 14px;
        border-radius:12px;
        cursor:pointer;
        font-weight:900;
      }
      .btn:hover{ border-color:#cbd5e1; background:#f8fafc; }
      .btn.primary{ border-color:#93c5fd; background:var(--soft); color:#0b3b76; }

      .note{
        margin-top:10px;
        padding:10px 12px;
        border:1px solid var(--line);
        border-radius:12px;
        background:#fbfdff;
        color:#0f172a;
        font-size:13px;
      }
      .note.warn{ border-color:#fde68a; background:#fffbeb; }
      .note.bad{ border-color:rgba(239,68,68,.35); background:rgba(239,68,68,.06); color:#7f1d1d; }

      .big{
        border-radius:var(--radius-sm);
        border:1px solid #c7d2fe;
        background:linear-gradient(180deg,#eef2ff,#ffffff);
        padding:14px;
        position:sticky;
        top:14px;
      }
      .big-head{
        display:flex; align-items:center; justify-content:space-between;
        gap:10px; margin-bottom:10px;
      }
      .status{
        font-size:12px; font-weight:950;
        padding:6px 10px;
        border-radius:999px;
        border:1px solid var(--line);
        background:#fff;
        color:#0f172a;
      }
      .status.ok{ border-color:rgba(22,163,74,.35); background:rgba(22,163,74,.08); color:#14532d; }
      .status.wait{ border-color:rgba(245,158,11,.35); background:rgba(245,158,11,.10); color:#7c2d12; }

      .big-title{ margin:0; font-size:14px; font-weight:950; color:#111827; }
      .big-sub{ margin:0 0 12px; color:var(--muted); font-size:12px; }

      .kv{
        border:1px solid var(--line);
        border-radius:14px;
        background:#fff;
        padding:12px;
      }
      .kv + .kv{ margin-top:10px; }

      .kv-k{
        font-size:12px; color:var(--muted);
        font-weight:950;
        display:flex; align-items:center; justify-content:space-between;
        gap:10px;
      }
      .badge{
        display:inline-flex; align-items:center;
        padding:5px 8px;
        border-radius:999px;
        border:1px solid var(--line);
        background:#fff;
        font-size:12px;
        font-weight:950;
        color:#0f172a;
        white-space:nowrap;
      }
      .kv-v{
        margin-top:6px;
        font-size:34px;
        font-weight:980;
        letter-spacing:-0.02em;
        color:#0f172a;
        line-height:1.05;
      }
      .kv-u{ margin-top:6px; font-size:12px; color:var(--muted); }

      .divider{ height:1px; background:var(--line); margin:14px 0; }

      .table{
        width:100%;
        border-collapse:collapse;
        margin-top:10px;
        font-size:14px;
      }
      .table th, .table td{
        border:1px solid var(--line);
        padding:10px;
        text-align:left;
        vertical-align:top;
      }
      .table th{ background:#f8fafc; font-weight:950; }

      .foot{ margin-top:16px; display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; }
      a{ color:var(--primary-2); text-decoration:none; }
      a:hover{ text-decoration:underline; }

      .recent{
        margin-top:10px;
        font-size:13px;
        color:var(--muted);
        max-height:140px;
        overflow:auto;
        padding-right:6px;
      }
      .recent div{ margin:6px 0; }
    </style>
  </head>

  <body>
    <main class="wrap">
      <div class="page-title">
        <div class="icon">üìà</div>
        <div>Compound Interest Calculator</div>
      </div>
      <p class="subtitle">
        Estimate how your investment grows over time with compounding and contributions.
        This is for education only (not financial advice).
      </p>

      <section class="card" aria-label="compound-interest-calculator">
        <div class="tabs" role="tablist" aria-label="Sections">
          <button class="tab" role="tab" aria-selected="true" data-tab="calc">Calculator</button>
          <button class="tab" role="tab" aria-selected="false" data-tab="breakdown">Breakdown</button>
          <button class="tab" role="tab" aria-selected="false" data-tab="tables">Tables</button>
          <button class="tab" role="tab" aria-selected="false" data-tab="faq">FAQ</button>
        </div>

        <div class="panel">
          <!-- Calculator -->
          <div data-panel="calc" class="active">
            <div class="grid">
              <!-- Inputs -->
              <div>
                <div class="box">
                  <div class="box-title">
                    <h2>1) Investment inputs</h2>
                    <div class="hint">Updates as you type</div>
                  </div>

                  <div class="row">
                    <div class="field">
                      <label for="principal">Initial investment</label>
                      <input id="principal" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 10000" />
                    </div>

                    <div class="field">
                      <label for="contribAmt">Contribution</label>
                      <input id="contribAmt" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 500" />
                    </div>

                    <div class="field">
                      <label for="contribFreq">Contribution frequency</label>
                      <select id="contribFreq" class="input">
                        <option value="none">None</option>
                        <option value="monthly" selected>Monthly</option>
                        <option value="annually">Annually</option>
                      </select>
                    </div>

                    <div class="field">
                      <label for="apy">Expected return (APR/APY)</label>
                      <div class="inline">
                        <input id="apy" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 8" />
                        <span class="badge">%</span>
                      </div>
                    </div>

                    <div class="field">
                      <label for="years">Time horizon</label>
                      <div class="inline">
                        <input id="years" class="input" type="number" step="1" inputmode="numeric" placeholder="e.g. 20" />
                        <span class="badge">years</span>
                      </div>
                    </div>

                    <div class="field">
                      <label for="compound">Compounding</label>
                      <select id="compound" class="input">
                        <option value="annually">Annually</option>
                        <option value="monthly" selected>Monthly</option>
                        <option value="daily">Daily (approx)</option>
                      </select>
                    </div>

                    <button type="button" id="clearBtn" class="btn">Clear</button>
                  </div>

                  <div class="note warn">
                    Tip: Fill <strong>initial + return + years</strong>. Add contributions to see how consistent investing changes outcomes.
                  </div>
                </div>

                <div class="box" style="margin-top:14px;">
                  <div class="box-title">
                    <h2>2) Optional: Inflation adjustment</h2>
                    <div class="hint">Show ‚Äúreal‚Äù value</div>
                  </div>

                  <div class="row">
                    <div class="field">
                      <label for="inflation">Inflation rate (annual)</label>
                      <div class="inline">
                        <input id="inflation" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 3" />
                        <span class="badge">%</span>
                      </div>
                    </div>

                    <div class="field">
                      <label for="showReal">Display mode</label>
                      <select id="showReal" class="input">
                        <option value="nominal" selected>Nominal (not adjusted)</option>
                        <option value="real">Real (inflation-adjusted)</option>
                        <option value="both">Both</option>
                      </select>
                    </div>
                  </div>

                  <div class="note">
                    Real value is an estimate: nominal √∑ (1 + inflation) ^ years.
                  </div>
                </div>
              </div>

              <!-- Big Result -->
              <aside class="big" aria-live="polite">
                <div class="big-head">
                  <div>
                    <p class="big-title">Results</p>
                    <p class="big-sub" id="summaryLine">Enter values to see results.</p>
                  </div>
                  <span id="statusPill" class="status wait">Waiting</span>
                </div>

                <div class="kv">
                  <div class="kv-k">
                    <span>Final value</span>
                    <span class="badge" id="badgeMode">Nominal</span>
                  </div>
                  <div class="kv-v" id="outFinal">‚Äî</div>
                  <div class="kv-u" id="outFinalSub">‚Äî</div>
                </div>

                <div class="kv">
                  <div class="kv-k"><span>Total contributed</span><span class="badge">cash in</span></div>
                  <div class="kv-v" id="outContrib">‚Äî</div>
                  <div class="kv-u" id="outContribSub">Initial + contributions</div>
                </div>

                <div class="kv">
                  <div class="kv-k"><span>Total growth</span><span class="badge">gain</span></div>
                  <div class="kv-v" id="outGain">‚Äî</div>
                  <div class="kv-u" id="outGainSub">Final ‚àí contributed</div>
                </div>

                <div class="divider"></div>

                <div class="kv">
                  <div class="kv-k"><span>CAGR (rough)</span><span class="badge">per year</span></div>
                  <div class="kv-v" id="outCagr">‚Äî</div>
                  <div class="kv-u">Approx annualized return (simple estimate)</div>
                </div>

                <div class="divider"></div>

                <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
                  <div class="hint" style="font-weight:900; color:#111827;">Recent</div>
                  <button type="button" id="copyBtn" class="btn">Copy</button>
                </div>
                <div class="recent" id="recentList">No calculations yet.</div>

                <div class="note bad" id="warnBox" style="display:none; margin-top:12px;"></div>
              </aside>
            </div>
          </div>

          <!-- Breakdown -->
          <div data-panel="breakdown">
            <div class="box">
              <div class="box-title">
                <h2>Breakdown</h2>
                <div class="hint">Totals</div>
              </div>

              <table class="table" aria-label="breakdown">
                <thead>
                  <tr><th>Metric</th><th>Value</th><th>Notes</th></tr>
                </thead>
                <tbody>
                  <tr><td>Final value</td><td id="bFinal">‚Äî</td><td>Ending account balance</td></tr>
                  <tr><td>Total contributed</td><td id="bContrib">‚Äî</td><td>Initial + contributions</td></tr>
                  <tr><td>Total gain</td><td id="bGain">‚Äî</td><td>Final ‚àí contributed</td></tr>
                  <tr><td>Return rate used</td><td id="bRate">‚Äî</td><td>Annual percentage input</td></tr>
                  <tr><td>Compounding</td><td id="bComp">‚Äî</td><td>How often growth applies</td></tr>
                  <tr><td>Inflation</td><td id="bInfl">‚Äî</td><td>If enabled</td></tr>
                </tbody>
              </table>

              <div class="note warn">
                This is a simplified model. Markets fluctuate; returns are not guaranteed.
              </div>
            </div>

            <div class="box" style="margin-top:14px;">
              <div class="box-title">
                <h2>Year-by-year table</h2>
                <div class="hint">End of each year</div>
              </div>

              <div style="overflow:auto;">
                <table class="table" aria-label="year by year">
                  <thead>
                    <tr>
                      <th>Year</th>
                      <th>Contributed (total)</th>
                      <th>Balance (end of year)</th>
                      <th>Gain (vs contributed)</th>
                    </tr>
                  </thead>
                  <tbody id="yearRows">
                    <tr><td colspan="4">Enter inputs to generate the table.</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Tables -->
          <div data-panel="tables">
            <div class="box">
              <div class="box-title">
                <h2>Quick intuition table</h2>
                <div class="hint">No contributions</div>
              </div>

              <table class="table" aria-label="intuition table">
                <thead>
                  <tr><th>Starting</th><th>Rate</th><th>Years</th><th>Final (approx)</th></tr>
                </thead>
                <tbody>
                  <tr><td>$10,000</td><td>7%</td><td>10</td><td>~$19,672</td></tr>
                  <tr><td>$10,000</td><td>7%</td><td>20</td><td>~$38,697</td></tr>
                  <tr><td>$10,000</td><td>10%</td><td>20</td><td>~$67,275</td></tr>
                  <tr><td>$100,000</td><td>8%</td><td>30</td><td>~$1,006,266</td></tr>
                </tbody>
              </table>

              <div class="note warn">
                These are rough examples for intuition only.
              </div>
            </div>
          </div>

          <!-- FAQ -->
          <div data-panel="faq">
            <div class="box">
              <div class="box-title">
                <h2>FAQ</h2>
                <div class="hint">Short answers</div>
              </div>

              <p><strong>What is compound interest?</strong> It‚Äôs growth on your original money plus growth on past growth.</p>
              <p><strong>Is this guaranteed?</strong> No. Expected return is an assumption; markets fluctuate.</p>
              <p><strong>Does contribution timing matter?</strong> Yes. This tool assumes contributions happen at the end of each period.</p>
              <p><strong>Real vs nominal?</strong> ‚ÄúReal‚Äù adjusts for inflation to estimate purchasing power.</p>
            </div>
          </div>

          <div class="foot">
            <a href="/">‚Üê Back to Home</a>
            <span class="subtitle" style="margin:0;">SEO-safe, no framework</span>
          </div>
        </div>
      </section>
    </main>

    <script>
      // -----------------------
      // Tabs (robust)
      // -----------------------
      const tabs = Array.from(document.querySelectorAll(".tab"));
      const panels = Array.from(document.querySelectorAll("[data-panel]"));
      function setTab(name){
        tabs.forEach(t => t.setAttribute("aria-selected", t.dataset.tab === name ? "true" : "false"));
        panels.forEach(p => p.classList.toggle("active", p.dataset.panel === name));
      }
      tabs.forEach(t => {
        t.type = "button";
        t.addEventListener("click", (e) => { e.preventDefault(); setTab(t.dataset.tab); });
      });
      const initialTab =
        tabs.find(t => t.getAttribute("aria-selected") === "true")?.dataset.tab
        || tabs[0]?.dataset.tab
        || "calc";
      setTab(initialTab);

      // -----------------------
      // Helpers
      // -----------------------
      const $ = (id) => document.getElementById(id);
      const money0 = new Intl.NumberFormat("en-US", { style:"currency", currency:"USD", maximumFractionDigits:0 });
      const money2 = new Intl.NumberFormat("en-US", { style:"currency", currency:"USD", maximumFractionDigits:2 });

      function num(v){
        const x = parseFloat(v);
        return Number.isFinite(x) ? x : NaN;
      }
      function nn(x){ return Number.isFinite(x) ? Math.max(0, x) : NaN; }

      function freqPerYear(v){
        if (v === "daily") return 365;
        if (v === "monthly") return 12;
        return 1; // annually
      }

      // End-of-period contribution model:
      // Each period: balance grows, then contribution is added.
      function simulate({
        principal,
        contribAmt,
        contribFreq,
        annualRatePct,
        years,
        compFreq
      }){
        const compN = freqPerYear(compFreq);
        const totalPeriods = Math.round(years * compN);
        const r = (annualRatePct / 100) / compN;

        // contribution frequency mapping to comp periods
        const contribN = contribFreq === "monthly" ? 12 : (contribFreq === "annually" ? 1 : 0);
        const contribEvery = contribN === 0 ? 0 : Math.round(compN / contribN); // periods between contributions

        let bal = principal;
        let contributed = principal;

        const yearRows = [];
        let nextContribIn = contribEvery;

        for (let p = 1; p <= totalPeriods; p++){
          // grow
          bal = bal * (1 + r);

          // contribution at end of period (if enabled)
          if (contribEvery > 0){
            nextContribIn -= 1;
            if (nextContribIn <= 0){
              bal += contribAmt;
              contributed += contribAmt;
              nextContribIn = contribEvery;
            }
          }

          // record end of each year
          if (p % compN === 0){
            const year = p / compN;
            yearRows.push({ year, contributed, balance: bal, gain: bal - contributed });
          }
        }

        return { balance: bal, contributed, gain: bal - contributed, yearRows };
      }

      function adjustForInflation(nominal, inflationPct, years){
        if (!Number.isFinite(nominal)) return NaN;
        if (!Number.isFinite(inflationPct) || inflationPct <= 0) return nominal;
        const f = Math.pow(1 + (inflationPct / 100), years);
        return nominal / f;
      }

      // -----------------------
      // DOM refs
      // -----------------------
      const principal = $("principal");
      const contribAmt = $("contribAmt");
      const contribFreq = $("contribFreq");
      const apy = $("apy");
      const years = $("years");
      const compound = $("compound");
      const inflation = $("inflation");
      const showReal = $("showReal");
      const clearBtn = $("clearBtn");

      // outputs
      const statusPill = $("statusPill");
      const summaryLine = $("summaryLine");
      const outFinal = $("outFinal");
      const outFinalSub = $("outFinalSub");
      const outContrib = $("outContrib");
      const outGain = $("outGain");
      const outCagr = $("outCagr");
      const badgeMode = $("badgeMode");
      const warnBox = $("warnBox");

      // breakdown
      const bFinal = $("bFinal");
      const bContrib = $("bContrib");
      const bGain = $("bGain");
      const bRate = $("bRate");
      const bComp = $("bComp");
      const bInfl = $("bInfl");
      const yearRowsEl = $("yearRows");

      // recent
      const recentList = $("recentList");
      const copyBtn = $("copyBtn");
      const recent = [];

      function setStatus(ok, text){
        statusPill.classList.toggle("ok", ok);
        statusPill.classList.toggle("wait", !ok);
        statusPill.textContent = text;
      }

      function pushRecent(text){
        if (!text) return;
        recent.unshift(text);
        if (recent.length > 10) recent.pop();
        renderRecent();
      }

      function renderRecent(){
        if (recent.length === 0){
          recentList.textContent = "No calculations yet.";
          return;
        }
        recentList.innerHTML = recent.map(s => `<div>‚Ä¢ ${s}</div>`).join("");
      }

      function renderYearRows(rows){
        if (!rows || rows.length === 0){
          yearRowsEl.innerHTML = `<tr><td colspan="4">Enter inputs to generate the table.</td></tr>`;
          return;
        }
        yearRowsEl.innerHTML = rows.map(r => `
          <tr>
            <td>${r.year}</td>
            <td>${money0.format(r.contributed)}</td>
            <td>${money0.format(r.balance)}</td>
            <td>${money0.format(r.gain)}</td>
          </tr>
        `).join("");
      }

      function compute(){
        warnBox.style.display = "none";
        warnBox.textContent = "";

        const P = nn(num(principal.value));
        const C = nn(num(contribAmt.value)) || 0;
        const rf = contribFreq.value;
        const R = num(apy.value);
        const Y = nn(num(years.value));
        const cf = compound.value;
        const infl = nn(num(inflation.value)) || 0;
        const mode = showReal.value;

        if (!Number.isFinite(P) || !Number.isFinite(R) || !Number.isFinite(Y) || P <= 0 || Y <= 0){
          setStatus(false, "Waiting");
          summaryLine.textContent = "Enter initial investment, expected return, and years.";
          [outFinal,outFinalSub,outContrib,outGain,outCagr,bFinal,bContrib,bGain,bRate,bComp,bInfl].forEach(el => el.textContent = "‚Äî");
          badgeMode.textContent = "Nominal";
          renderYearRows([]);
          return;
        }

        if (R > 50){
          warnBox.style.display = "block";
          warnBox.textContent = "Return rate looks unusually high. Double-check the input.";
        }

        const { balance, contributed, gain, yearRows } = simulate({
          principal: P,
          contribAmt: C,
          contribFreq: rf,
          annualRatePct: R,
          years: Y,
          compFreq: cf
        });

        // simple CAGR estimate:
        // If contributions exist, CAGR is less meaningful. We'll show a rough "effective" rate.
        let cagr = NaN;
        if (contributed > 0){
          cagr = Math.pow(balance / contributed, 1 / Y) - 1;
        }

        // inflation-adjusted final (real)
        const finalReal = adjustForInflation(balance, infl, Y);

        // choose display
        let finalShown = balance;
        let finalSub = "";
        if (mode === "real"){
          finalShown = finalReal;
          badgeMode.textContent = "Real";
          finalSub = `Inflation-adjusted using ${infl || 0}%/yr`;
        } else if (mode === "both"){
          badgeMode.textContent = "Both";
          finalSub = `Nominal ${money0.format(balance)} ¬∑ Real ${money0.format(finalReal)}`;
        } else {
          badgeMode.textContent = "Nominal";
          finalSub = "Not adjusted for inflation";
        }

        setStatus(true, "Ready");
        summaryLine.textContent =
          `${money0.format(P)} start ¬∑ ${R}%/yr ¬∑ ${Y} years ¬∑ ${rf === "none" ? "no contributions" : money0.format(C) + " " + rf}`;

        outFinal.textContent = money0.format(finalShown);
        outFinalSub.textContent = finalSub || "‚Äî";
        outContrib.textContent = money0.format(contributed);
        outGain.textContent = money0.format(gain);
        outCagr.textContent = Number.isFinite(cagr) ? (Math.round(cagr * 10000) / 100).toFixed(2) + "%" : "‚Äî";

        // breakdown
        bFinal.textContent = money0.format(balance);
        bContrib.textContent = money0.format(contributed);
        bGain.textContent = money0.format(gain);
        bRate.textContent = `${R}% per year`;
        bComp.textContent = cf;
        bInfl.textContent = infl > 0 ? `${infl}% per year` : "Not used";

        renderYearRows(yearRows);

        // recent
        const rec = `${money0.format(P)} ¬∑ ${R}% ¬∑ ${Y}y ¬∑ ${rf === "none" ? "no contrib" : money0.format(C) + "/" + (rf === "monthly" ? "mo" : "yr")} ‚Üí ${money0.format(balance)}`;
        pushRecent(rec);
      }

      function bindAll(){
        const inputs = [
          principal, contribAmt, contribFreq, apy, years, compound, inflation, showReal
        ];
        inputs.forEach(el => {
          el.addEventListener("input", compute);
          el.addEventListener("change", compute);
        });

        clearBtn.addEventListener("click", () => {
          principal.value = "";
          contribAmt.value = "";
          contribFreq.value = "monthly";
          apy.value = "";
          years.value = "20";
          compound.value = "monthly";
          inflation.value = "";
          showReal.value = "nominal";
          recent.length = 0;
          renderRecent();
          compute();
        });

        copyBtn.addEventListener("click", async () => {
          const text = recent.length ? recent[0] : "";
          if (!text) return;
          try{
            await navigator.clipboard.writeText(text);
            copyBtn.textContent = "Copied";
            setTimeout(() => (copyBtn.textContent = "Copy"), 900);
          }catch(e){
            copyBtn.textContent = "Copy failed";
            setTimeout(() => (copyBtn.textContent = "Copy"), 900);
          }
        });
      }

      bindAll();
      years.value = years.value || "20";
      renderRecent();
      compute();
    </script>
  </body>
</html>
