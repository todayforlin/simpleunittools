---
const title = "Download Time Calculator";
const description =
  "Estimate download time instantly. Enter file size + speed to get a big, obvious result (seconds/minutes/hours/days). Includes overhead, Mbps↔MB/s helper, and a few practical tips — no tabs.";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />

    <style>
      :root{
        --bg:#f5f7fb;
        --card:#ffffff;
        --text:#0f172a;
        --muted:#64748b;
        --line:#e5e7eb;
        --primary:#2563eb;
        --primary-2:#1e40af;
        --soft:#eef2ff;
        --shadow:0 10px 26px rgba(15,23,42,.10);
        --radius:14px;
        --radius-sm:12px;
      }

      *{ box-sizing:border-box; }
      body{
        margin:0;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
        background:var(--bg);
        color:var(--text);
      }
      .wrap{ max-width:980px; margin:22px auto; padding:0 16px 36px; }

      .page-title{
        display:flex; align-items:center; gap:10px;
        font-size:20px; font-weight:950; margin:6px 0 10px;
        color:#111827;
      }
      .page-title .icon{
        width:32px; height:32px; border-radius:10px;
        background:linear-gradient(135deg,var(--primary),#60a5fa);
        box-shadow:0 10px 18px rgba(37,99,235,.25);
        display:flex; align-items:center; justify-content:center;
        color:#fff; font-weight:950;
      }
      .subtitle{ margin:0 0 14px; color:var(--muted); font-size:14px; }

      .card{
        background:var(--card);
        border:1px solid var(--line);
        border-radius:var(--radius);
        box-shadow:var(--shadow);
        overflow:hidden;
      }
      .panel{ padding:16px; }

      .grid{
        display:grid;
        grid-template-columns: 1fr;
        gap:14px;
      }
      @media (min-width: 860px){
        .grid{ grid-template-columns: 1.2fr .8fr; align-items:start; }
      }

      .box{
        border:1px solid var(--line);
        border-radius:var(--radius-sm);
        background:#fff;
        padding:14px;
      }
      .box + .box{ margin-top:14px; }

      .box-title{
        display:flex; align-items:flex-end; justify-content:space-between; gap:10px;
        margin-bottom:10px;
      }
      .box-title h2{ margin:0; font-size:14px; color:#111827; font-weight:950; }
      .hint{ font-size:12px; color:var(--muted); }

      .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:flex-end; }

      .field{
        display:flex; flex-direction:column; gap:6px;
        min-width: 200px;
        flex: 1 1 200px;
      }
      .field label{ font-size:12px; font-weight:900; color:#111827; }
      .input{
        border:1px solid var(--line);
        border-radius:12px;
        padding:10px 12px;
        font-size:14px;
        outline:none;
        width:100%;
        background:#fff;
      }
      .input:focus{
        border-color:#93c5fd;
        box-shadow:0 0 0 3px rgba(147,197,253,.35);
      }

      .btn{
        border:1px solid var(--line);
        background:#fff;
        padding:10px 14px;
        border-radius:12px;
        cursor:pointer;
        font-weight:900;
      }
      .btn:hover{ border-color:#cbd5e1; background:#f8fafc; }
      .btn.primary{
        border-color:#93c5fd;
        background:var(--soft);
        color:#0b3b76;
      }

      .chips{
        display:flex; gap:10px; flex-wrap:wrap;
        margin: 8px 0 10px;
      }
      .chip{
        border:1px solid var(--line);
        background:#fff;
        border-radius:999px;
        padding:8px 10px;
        font-size:13px;
        color:#0f172a;
        font-weight:900;
        cursor:pointer;
        display:flex; align-items:center; gap:8px;
      }
      .chip input{ transform: translateY(1px); }
      .chip.active{ border-color:#bfdbfe; background:#eff6ff; color:#0b3b76; }

      .note{
        margin-top:10px;
        padding:10px 12px;
        border:1px solid var(--line);
        border-radius:12px;
        background:#fbfdff;
        color:#0f172a;
        font-size:13px;
      }
      .note.warn{
        border-color:#fde68a;
        background:#fffbeb;
      }

      /* BIG result */
      .big{
        border-radius: var(--radius-sm);
        border: 1px solid #c7d2fe;
        background: linear-gradient(180deg, #eef2ff, #ffffff);
        padding: 14px;
        position: sticky;
        top: 14px;
      }
      .big-head{
        display:flex; align-items:center; justify-content:space-between; gap:10px;
        margin-bottom: 10px;
      }
      .status{
        font-size:12px;
        font-weight:950;
        padding:6px 10px;
        border-radius:999px;
        border:1px solid var(--line);
        background:#fff;
        color:#0f172a;
      }
      .status.ok{ border-color: rgba(22,163,74,.35); background: rgba(22,163,74,.08); color:#14532d; }
      .status.wait{ border-color: rgba(245,158,11,.35); background: rgba(245,158,11,.10); color:#7c2d12; }

      .big-title{ margin:0; font-size:14px; font-weight:980; color:#111827; }
      .big-sub{ margin: 0 0 12px; color: var(--muted); font-size: 12px; }

      .time-card{
        border:1px solid var(--line);
        border-radius: 14px;
        background:#fff;
        padding:12px;
      }
      .time-k{
        font-size:12px;
        color:var(--muted);
        font-weight:950;
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
      }
      .badge{
        display:inline-flex;
        align-items:center;
        padding: 5px 8px;
        border-radius: 999px;
        border:1px solid var(--line);
        background:#fff;
        font-size:12px;
        font-weight:950;
        color:#0f172a;
        white-space:nowrap;
      }
      .time-v{
        margin-top:6px;
        font-size: 42px;
        font-weight: 999;
        letter-spacing: -0.02em;
        color:#0f172a;
        line-height:1.05;
      }
      .time-u{ margin-top: 6px; font-size: 12px; color: var(--muted); }

      .divider{ height:1px; background: var(--line); margin:14px 0; }

      .recent{
        margin-top:10px;
        font-size:13px;
        color:var(--muted);
        max-height: 140px;
        overflow:auto;
        padding-right: 6px;
      }
      .recent div{ margin: 6px 0; }

      .foot{
        margin-top: 16px;
        display:flex;
        justify-content: space-between;
        gap:10px;
        flex-wrap:wrap;
      }
      a{ color: var(--primary-2); text-decoration:none; }
      a:hover{ text-decoration:underline; }
    </style>
  </head>

  <body>
    <main class="wrap">
      <div class="page-title">
        <div class="icon">⬇</div>
        <div>Download Time Calculator</div>
      </div>

      <p class="subtitle">
        Enter <strong>file size</strong> + <strong>speed</strong>. The estimate shows up <strong>big and instantly</strong>.
        Tip: ISP plans are usually <strong>Mbps</strong> (megabits), while downloads often show <strong>MB/s</strong> (megabytes).
      </p>

      <section class="card" aria-label="download time calculator">
        <div class="panel">
          <div class="grid">
            <!-- LEFT: Inputs only (no tabs/sections) -->
            <div>
              <div class="box">
                <div class="box-title">
                  <h2>Calculator</h2>
                  <div class="hint">Updates as you type</div>
                </div>

                <div class="chips" id="speedChips">
                  <label class="chip active">
                    <input type="radio" name="speedMode" value="mbps" checked />
                    Speed in Mbps (plan speed)
                  </label>
                  <label class="chip">
                    <input type="radio" name="speedMode" value="mbpsReal" />
                    Speed in MB/s (real speed)
                  </label>
                </div>

                <div class="row">
                  <div class="field">
                    <label for="sizeValue">File size</label>
                    <input id="sizeValue" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 10" />
                  </div>

                  <div class="field" style="min-width: 220px; flex: 0 0 220px;">
                    <label for="sizeUnit">Size unit</label>
                    <select id="sizeUnit" class="input">
                      <option value="MB">MB</option>
                      <option value="GB" selected>GB</option>
                      <option value="TB">TB</option>
                    </select>
                  </div>

                  <div class="field" id="speedField">
                    <label for="speedValue">Speed (Mbps)</label>
                    <input id="speedValue" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 100" />
                  </div>

                  <div class="field" style="min-width: 190px; flex: 0 0 190px;">
                    <label for="overhead">Overhead</label>
                    <select id="overhead" class="input" title="Protocol overhead and real-world slowdowns">
                      <option value="1">None (ideal)</option>
                      <option value="0.9" selected>10% overhead</option>
                      <option value="0.8">20% overhead</option>
                      <option value="0.7">30% overhead</option>
                    </select>
                  </div>

                  <div class="field" style="min-width: 170px; flex: 0 0 170px;">
                    <label for="rounding">Rounding</label>
                    <select id="rounding" class="input">
                      <option value="1">1 decimal</option>
                      <option value="2" selected>2 decimals</option>
                      <option value="3">3 decimals</option>
                    </select>
                  </div>

                  <button type="button" id="clearBtn" class="btn">Clear</button>
                </div>

                <div class="note warn" id="unitHint">
                  <strong>Heads up:</strong> 100 <strong>Mbps</strong> ≈ 12.5 <strong>MB/s</strong> (divide by 8).
                </div>
              </div>

              <div class="box">
                <div class="box-title">
                  <h2>Optional: Upload speed shortcut</h2>
                  <div class="hint">Paste your upload Mbps and reuse it</div>
                </div>

                <div class="row">
                  <div class="field">
                    <label for="uploadSpeed">Upload speed (Mbps)</label>
                    <input id="uploadSpeed" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 20" />
                  </div>
                  <button type="button" id="useUploadBtn" class="btn primary">Use upload speed</button>
                </div>

                <p class="subtitle" style="margin:10px 0 0;">
                  Clicking “Use upload speed” sets the calculator speed to that value (in Mbps mode).
                </p>
              </div>
            </div>

            <!-- RIGHT: Big result -->
            <aside class="big" aria-live="polite">
              <div class="big-head">
                <div>
                  <p class="big-title">Estimated time</p>
                  <p class="big-sub" id="summaryLine">Enter values to see results.</p>
                </div>
                <span id="statusPill" class="status wait">Waiting</span>
              </div>

              <div class="time-card">
                <div class="time-k">
                  <span>Total time</span>
                  <span class="badge" id="speedBadge">—</span>
                </div>
                <div class="time-v" id="timeBig">—</div>
                <div class="time-u" id="timeSmall">—</div>
              </div>

              <div class="note" style="margin-top:10px;">
                <strong>Effective speed</strong> = your input × (1 − overhead). Use overhead if you want realistic time.
              </div>

              <div class="divider"></div>

              <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
                <div class="hint" style="font-weight:950; color:#111827;">Recent</div>
                <button type="button" id="copyBtn" class="btn">Copy</button>
              </div>
              <div class="recent" id="recentList">No calculations yet.</div>
            </aside>
          </div>

          <div class="foot">
            <a href="/">← Back to Home</a>
            <span class="subtitle" style="margin:0;">SEO-safe, no framework</span>
          </div>
        </div>
      </section>
    </main>

    <script>
      // ---- UI ----
      const speedModeRadios = Array.from(document.querySelectorAll('input[name="speedMode"]'));
      const speedChips = Array.from(document.querySelectorAll("#speedChips .chip"));

      const sizeValue = document.getElementById("sizeValue");
      const sizeUnit = document.getElementById("sizeUnit");
      const speedValue = document.getElementById("speedValue");
      const speedField = document.getElementById("speedField");
      const overhead = document.getElementById("overhead");
      const rounding = document.getElementById("rounding");
      const clearBtn = document.getElementById("clearBtn");

      const uploadSpeed = document.getElementById("uploadSpeed");
      const useUploadBtn = document.getElementById("useUploadBtn");

      const summaryLine = document.getElementById("summaryLine");
      const statusPill = document.getElementById("statusPill");
      const timeBig = document.getElementById("timeBig");
      const timeSmall = document.getElementById("timeSmall");
      const speedBadge = document.getElementById("speedBadge");

      const recentList = document.getElementById("recentList");
      const copyBtn = document.getElementById("copyBtn");
      const unitHint = document.getElementById("unitHint");

      const recent = [];

      function getSpeedMode(){
        const checked = speedModeRadios.find(r => r.checked);
        return checked ? checked.value : "mbps";
      }

      function setSpeedModeUI(mode){
        speedChips.forEach(chip => {
          const input = chip.querySelector("input");
          chip.classList.toggle("active", input && input.value === mode);
        });

        if (mode === "mbps"){
          speedField.querySelector("label").textContent = "Speed (Mbps)";
          speedValue.placeholder = "e.g. 100";
          unitHint.innerHTML = "<strong>Heads up:</strong> 100 <strong>Mbps</strong> ≈ 12.5 <strong>MB/s</strong> (divide by 8).";
        } else {
          speedField.querySelector("label").textContent = "Speed (MB/s)";
          speedValue.placeholder = "e.g. 12.5";
          unitHint.innerHTML = "<strong>Heads up:</strong> 12.5 <strong>MB/s</strong> ≈ 100 <strong>Mbps</strong> (multiply by 8).";
        }
      }

      // Binary units (common in computing)
      function toMB(size, unit){
        const x = Number(size);
        if (!Number.isFinite(x) || x <= 0) return null;
        if (unit === "MB") return x;
        if (unit === "GB") return x * 1024;
        if (unit === "TB") return x * 1024 * 1024;
        return null;
      }

      function formatDuration(seconds){
        if (!Number.isFinite(seconds) || seconds <= 0) return { big:"—", small:"—" };

        const s = Math.round(seconds);
        const days = Math.floor(s / 86400);
        const hrs  = Math.floor((s % 86400) / 3600);
        const mins = Math.floor((s % 3600) / 60);
        const secs = s % 60;

        if (days > 0) return { big: `${days}d ${hrs}h`, small: `${mins}m ${secs}s (total ~${s.toLocaleString()}s)` };
        if (hrs > 0)  return { big: `${hrs}h ${mins}m`, small: `${secs}s (total ~${s.toLocaleString()}s)` };
        if (mins > 0) return { big: `${mins}m ${secs}s`, small: `~${s.toLocaleString()} seconds` };
        return { big: `${secs}s`, small: `~${s.toLocaleString()} seconds` };
      }

      function pushRecent(text){
        recent.unshift(text);
        if (recent.length > 10) recent.pop();
        if (recent.length === 0){
          recentList.textContent = "No calculations yet.";
          return;
        }
        recentList.innerHTML = recent.map(s => `<div>• ${s}</div>`).join("");
      }

      function clearOutput(){
        summaryLine.textContent = "Enter values to see results.";
        statusPill.textContent = "Waiting";
        statusPill.className = "status wait";
        timeBig.textContent = "—";
        timeSmall.textContent = "—";
        speedBadge.textContent = "—";
      }

      function roundTo(v, decimals){
        const d = Number(decimals);
        const factor = Math.pow(10, d);
        return Math.round(v * factor) / factor;
      }

      function calc(){
        const mb = toMB(sizeValue.value, sizeUnit.value);
        const sp = parseFloat(speedValue.value);
        const mode = getSpeedMode();
        const eff = parseFloat(overhead.value);

        if (!mb || !Number.isFinite(sp) || sp <= 0 || !Number.isFinite(eff) || eff <= 0){
          clearOutput();
          return null;
        }

        // speed -> MB/s
        let speedMBps = sp;
        if (mode === "mbps") speedMBps = sp / 8;

        // apply overhead
        speedMBps = speedMBps * eff;

        if (!Number.isFinite(speedMBps) || speedMBps <= 0){
          clearOutput();
          return null;
        }

        const seconds = mb / speedMBps;
        return { mb, seconds, speedMBps, mode, eff };
      }

      function render(){
        const out = calc();
        if (!out) return;

        const d = Number(rounding.value);
        const t = formatDuration(out.seconds);

        const effectiveBadge = out.mode === "mbps"
          ? `${roundTo(out.speedMBps * 8, d)} Mbps (effective)`
          : `${roundTo(out.speedMBps, d)} MB/s (effective)`;

        speedBadge.textContent = effectiveBadge;
        timeBig.textContent = t.big;
        timeSmall.textContent = t.small;

        summaryLine.textContent =
          `File: ${sizeValue.value} ${sizeUnit.value} · Speed: ${speedValue.value} ${out.mode === "mbps" ? "Mbps" : "MB/s"} · Overhead: ${Math.round((1 - out.eff) * 100)}%`;

        statusPill.textContent = "Live result";
        statusPill.className = "status ok";

        pushRecent(`${sizeValue.value} ${sizeUnit.value} @ ${effectiveBadge} → ${t.big}`);
      }

      // Events
      speedModeRadios.forEach(r => r.addEventListener("change", () => {
        setSpeedModeUI(getSpeedMode());
        render();
      }));

      [sizeValue, sizeUnit, speedValue, overhead, rounding].forEach(el => el.addEventListener("input", render));
      sizeUnit.addEventListener("change", render);
      overhead.addEventListener("change", render);

      clearBtn.addEventListener("click", () => {
        sizeValue.value = "";
        speedValue.value = "";
        uploadSpeed.value = "";
        recent.length = 0;
        recentList.textContent = "No calculations yet.";
        clearOutput();
      });

      useUploadBtn.addEventListener("click", () => {
        const up = parseFloat(uploadSpeed.value);
        if (!Number.isFinite(up) || up <= 0) return;

        // force Mbps mode
        speedModeRadios.forEach(r => r.checked = (r.value === "mbps"));
        setSpeedModeUI("mbps");

        speedValue.value = up;
        render();
      });

      copyBtn.addEventListener("click", async () => {
        const out = calc();
        const text = out
          ? `Estimated time: ${timeBig.textContent} (${timeSmall.textContent}) | ${speedBadge.textContent}`
          : "No result yet.";

        try{
          await navigator.clipboard.writeText(text);
          copyBtn.textContent = "Copied";
          setTimeout(() => (copyBtn.textContent = "Copy"), 900);
        }catch(e){
          copyBtn.textContent = "Copy failed";
          setTimeout(() => (copyBtn.textContent = "Copy"), 900);
        }
      });

      // Init
      setSpeedModeUI(getSpeedMode());
      clearOutput();
    </script>
  </body>
</html>
