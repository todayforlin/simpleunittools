---
const title = "Ohm’s Law Calculator";
const description =
  "Calculate voltage, current, resistance, and power instantly using Ohm’s Law. Interactive calculator with unit support (V, A, mA, Ω, kΩ, MΩ), formulas, examples, and FAQ.";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />

    <style>
      :root{
        --bg:#f5f7fb;
        --card:#ffffff;
        --text:#0f172a;
        --muted:#64748b;
        --line:#e5e7eb;
        --primary:#2563eb;
        --primary-2:#1e40af;
        --soft:#eef2ff;
        --soft-2:#dbeafe;
        --shadow:0 10px 26px rgba(15,23,42,.10);
        --radius:14px;
        --radius-sm:12px;
        --ok:#16a34a;
        --wait:#f59e0b;
      }

      *{ box-sizing:border-box; }
      body{
        margin:0;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
        background:var(--bg);
        color:var(--text);
      }
      .wrap{
        max-width:980px;
        margin:22px auto;
        padding:0 16px 32px;
      }
      .page-title{
        display:flex;
        align-items:center;
        gap:10px;
        font-size:20px;
        font-weight:900;
        margin:6px 0 10px;
        color:#111827;
      }
      .page-title .icon{
        width:32px;height:32px;
        border-radius:10px;
        background:linear-gradient(135deg,var(--primary),#60a5fa);
        box-shadow:0 10px 18px rgba(37,99,235,.25);
        display:flex;
        align-items:center;
        justify-content:center;
        color:#fff;
        font-weight:950;
      }
      .subtitle{
        margin:0 0 14px;
        color:var(--muted);
        font-size:14px;
      }

      .card{
        background:var(--card);
        border:1px solid var(--line);
        border-radius:var(--radius);
        box-shadow:var(--shadow);
        overflow:hidden;
      }

      .tabs{
        display:flex;
        gap:0;
        border-bottom:1px solid var(--line);
        background:#fff;
        padding:10px 10px 0;
        overflow-x:auto;
      }
      .tab{
        appearance:none;
        border:1px solid var(--line);
        border-bottom:none;
        background:#f8fafc;
        color:#334155;
        padding:10px 14px;
        border-top-left-radius:12px;
        border-top-right-radius:12px;
        font-weight:900;
        cursor:pointer;
        white-space:nowrap;
        margin-right:8px;
      }
      .tab[aria-selected="true"]{
        background:#fff;
        color:var(--primary-2);
        box-shadow:0 -1px 0 #fff inset;
      }

      .panel{ padding:16px; }
      [data-panel]{ display:none; }
      [data-panel].active{ display:block; }

      .grid{
        display:grid;
        grid-template-columns:1fr;
        gap:14px;
      }
      @media (min-width: 860px){
        .grid{
          grid-template-columns:1.2fr .8fr;
          align-items:start;
        }
      }

      .box{
        border:1px solid var(--line);
        border-radius:var(--radius-sm);
        background:#fff;
        padding:14px;
      }
      .box-title{
        display:flex;
        align-items:flex-end;
        justify-content:space-between;
        gap:10px;
        margin-bottom:10px;
      }
      .box-title h2{
        margin:0;
        font-size:14px;
        color:#111827;
        font-weight:950;
      }
      .hint{
        font-size:12px;
        color:var(--muted);
      }

      .row{
        display:flex;
        gap:12px;
        flex-wrap:wrap;
        align-items:flex-end;
      }
      .field{
        display:flex;
        flex-direction:column;
        gap:6px;
        min-width:200px;
        flex:1 1 200px;
      }
      .field label{
        font-size:12px;
        font-weight:900;
        color:#111827;
      }
      .inline{
        display:flex;
        gap:10px;
        align-items:center;
      }
      .input{
        border:1px solid var(--line);
        border-radius:12px;
        padding:10px 12px;
        font-size:14px;
        outline:none;
        width:100%;
        background:#fff;
      }
      .input:focus{
        border-color:#93c5fd;
        box-shadow:0 0 0 3px rgba(147,197,253,.35);
      }
      .mini{ width:170px; flex:0 0 170px; }
      .mini-sm{ width:140px; flex:0 0 140px; }

      .btn{
        border:1px solid var(--line);
        background:#fff;
        padding:10px 14px;
        border-radius:12px;
        cursor:pointer;
        font-weight:900;
      }
      .btn:hover{
        border-color:#cbd5e1;
        background:#f8fafc;
      }
      .btn.primary{
        border-color:#93c5fd;
        background:var(--soft);
        color:#0b3b76;
      }

      .note{
        margin-top:10px;
        padding:10px 12px;
        border:1px solid var(--line);
        border-radius:12px;
        background:#fbfdff;
        color:#0f172a;
        font-size:13px;
      }
      .note.warn{
        border-color:#fde68a;
        background:#fffbeb;
      }

      .big{
        border-radius:var(--radius-sm);
        border:1px solid #c7d2fe;
        background:linear-gradient(180deg,#eef2ff,#ffffff);
        padding:14px;
        position:sticky;
        top:14px;
      }
      .big-head{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        margin-bottom:10px;
      }
      .status{
        font-size:12px;
        font-weight:950;
        padding:6px 10px;
        border-radius:999px;
        border:1px solid var(--line);
        background:#fff;
        color:#0f172a;
      }
      .status.ok{
        border-color:rgba(22,163,74,.35);
        background:rgba(22,163,74,.08);
        color:#14532d;
      }
      .status.wait{
        border-color:rgba(245,158,11,.35);
        background:rgba(245,158,11,.10);
        color:#7c2d12;
      }

      .big-title{
        margin:0;
        font-size:14px;
        font-weight:950;
        color:#111827;
      }
      .big-sub{
        margin:0 0 12px;
        color:var(--muted);
        font-size:12px;
      }

      .kv{
        border:1px solid var(--line);
        border-radius:14px;
        background:#fff;
        padding:12px;
      }
      .kv + .kv{ margin-top:10px; }

      .kv-k{
        font-size:12px;
        color:var(--muted);
        font-weight:950;
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
      }
      .badge{
        display:inline-flex;
        align-items:center;
        padding:5px 8px;
        border-radius:999px;
        border:1px solid var(--line);
        background:#fff;
        font-size:12px;
        font-weight:950;
        color:#0f172a;
        white-space:nowrap;
      }
      .kv-v{
        margin-top:6px;
        font-size:34px;
        font-weight:980;
        letter-spacing:-0.02em;
        color:#0f172a;
        line-height:1.05;
      }
      .kv-u{
        margin-top:6px;
        font-size:12px;
        color:var(--muted);
      }

      .divider{
        height:1px;
        background:var(--line);
        margin:14px 0;
      }

      .table{
        width:100%;
        border-collapse:collapse;
        margin-top:10px;
        font-size:14px;
      }
      .table th, .table td{
        border:1px solid var(--line);
        padding:10px;
        text-align:left;
        vertical-align:top;
      }
      .table th{
        background:#f8fafc;
        font-weight:950;
      }

      .foot{
        margin-top:16px;
        display:flex;
        justify-content:space-between;
        gap:10px;
        flex-wrap:wrap;
      }
      a{ color:var(--primary-2); text-decoration:none; }
      a:hover{ text-decoration:underline; }

      .recent{
        margin-top:10px;
        font-size:13px;
        color:var(--muted);
        max-height:140px;
        overflow:auto;
        padding-right:6px;
      }
      .recent div{ margin:6px 0; }
    </style>
  </head>

  <body>
    <main class="wrap">
      <div class="page-title">
        <div class="icon">Ω</div>
        <div>Ohm’s Law Calculator</div>
      </div>

      <p class="subtitle">
        Enter any <strong>two</strong> values to calculate the rest (Voltage, Current, Resistance).
        Power (W) is also calculated automatically.
      </p>

      <section class="card" aria-label="ohms-law-calculator">
        <div class="tabs" role="tablist" aria-label="Sections">
          <button class="tab" role="tab" aria-selected="true" data-tab="calc">Calculator</button>
          <button class="tab" role="tab" aria-selected="false" data-tab="formulas">Formulas</button>
          <button class="tab" role="tab" aria-selected="false" data-tab="examples">Examples</button>
          <button class="tab" role="tab" aria-selected="false" data-tab="faq">FAQ</button>
        </div>

        <div class="panel">
          <!-- Calculator -->
          <div data-panel="calc" class="active">
            <div class="grid">
              <!-- Inputs -->
              <div>
                <div class="box">
                  <div class="box-title">
                    <h2>Enter values (any two)</h2>
                    <div class="hint">All results update as you type</div>
                  </div>

                  <div class="row">
                    <div class="field">
                      <label for="vValue">Voltage (V)</label>
                      <div class="inline">
                        <input id="vValue" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 12" />
                        <select id="vUnit" class="input mini-sm" aria-label="voltage unit">
                          <option value="V" selected>V</option>
                          <option value="mV">mV</option>
                          <option value="kV">kV</option>
                        </select>
                      </div>
                    </div>

                    <div class="field">
                      <label for="iValue">Current</label>
                      <div class="inline">
                        <input id="iValue" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 2" />
                        <select id="iUnit" class="input mini-sm" aria-label="current unit">
                          <option value="A" selected>A</option>
                          <option value="mA">mA</option>
                        </select>
                      </div>
                    </div>

                    <div class="field">
                      <label for="rValue">Resistance</label>
                      <div class="inline">
                        <input id="rValue" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 6" />
                        <select id="rUnit" class="input mini-sm" aria-label="resistance unit">
                          <option value="Ω" selected>Ω</option>
                          <option value="kΩ">kΩ</option>
                          <option value="MΩ">MΩ</option>
                        </select>
                      </div>
                    </div>

                    <div class="field" style="min-width: 170px; flex: 0 0 170px;">
                      <label for="rounding">Rounding</label>
                      <select id="rounding" class="input" aria-label="rounding decimals">
                        <option value="2">2 decimals</option>
                        <option value="3" selected>3 decimals</option>
                        <option value="4">4 decimals</option>
                        <option value="6">6 decimals</option>
                      </select>
                    </div>

                    <button type="button" id="clearBtn" class="btn">Clear</button>
                  </div>

                  <div class="note warn" id="hintBox">
                    Tip: You only need <strong>two</strong> fields. For example:
                    <strong>V + R → I</strong>, or <strong>V + I → R</strong>, or <strong>I + R → V</strong>.
                  </div>
                </div>

                <div class="box" style="margin-top:14px;">
                  <div class="box-title">
                    <h2>Optional: LED resistor helper</h2>
                    <div class="hint">Quick common use-case</div>
                  </div>

                  <div class="row">
                    <div class="field">
                      <label for="ledVs">Supply voltage (V)</label>
                      <input id="ledVs" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 5" />
                    </div>
                    <div class="field">
                      <label for="ledVf">LED forward voltage (V)</label>
                      <input id="ledVf" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 2.0" />
                    </div>
                    <div class="field">
                      <label for="ledI">Target current (mA)</label>
                      <input id="ledI" class="input" type="number" step="any" inputmode="decimal" placeholder="e.g. 20" />
                    </div>
                    <button type="button" id="useLedBtn" class="btn primary">Fill into calculator</button>
                  </div>

                  <div class="note" id="ledNote">
                    Calculates <strong>R = (Vs − Vf) ÷ I</strong> and then fills values into the main calculator.
                  </div>
                </div>
              </div>

              <!-- Big Result -->
              <aside class="big" aria-live="polite">
                <div class="big-head">
                  <div>
                    <p class="big-title">Results</p>
                    <p class="big-sub" id="summaryLine">Enter any two values to calculate.</p>
                  </div>
                  <span id="statusPill" class="status wait">Waiting</span>
                </div>

                <div class="kv">
                  <div class="kv-k">
                    <span>Voltage</span>
                    <span class="badge" id="vBadge">—</span>
                  </div>
                  <div class="kv-v" id="vOut">—</div>
                  <div class="kv-u" id="vSmall">—</div>
                </div>

                <div class="kv">
                  <div class="kv-k">
                    <span>Current</span>
                    <span class="badge" id="iBadge">—</span>
                  </div>
                  <div class="kv-v" id="iOut">—</div>
                  <div class="kv-u" id="iSmall">—</div>
                </div>

                <div class="kv">
                  <div class="kv-k">
                    <span>Resistance</span>
                    <span class="badge" id="rBadge">—</span>
                  </div>
                  <div class="kv-v" id="rOut">—</div>
                  <div class="kv-u" id="rSmall">—</div>
                </div>

                <div class="divider"></div>

                <div class="kv">
                  <div class="kv-k">
                    <span>Power</span>
                    <span class="badge" id="pBadge">W</span>
                  </div>
                  <div class="kv-v" id="pOut">—</div>
                  <div class="kv-u" id="pSmall">P = V × I</div>
                </div>

                <div class="divider"></div>

                <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
                  <div class="hint" style="font-weight:900; color:#111827;">Recent</div>
                  <button type="button" id="copyBtn" class="btn">Copy</button>
                </div>
                <div class="recent" id="recentList">No calculations yet.</div>

                <div class="note" id="warnPower" style="display:none; margin-top:12px;">
                  Power seems high. In real circuits this could mean heat. Consider resistor wattage and safe limits.
                </div>
              </aside>
            </div>
          </div>

          <!-- Formulas -->
          <div data-panel="formulas">
            <div class="box">
              <div class="box-title">
                <h2>Ohm’s Law + Power Formulas</h2>
                <div class="hint">Most-used equations</div>
              </div>

              <div class="note"><strong>V = I × R</strong></div>
              <div class="note"><strong>I = V ÷ R</strong></div>
              <div class="note"><strong>R = V ÷ I</strong></div>

              <div class="note warn"><strong>P = V × I</strong> (power, watts)</div>
              <div class="note"><strong>P = I² × R</strong></div>
              <div class="note"><strong>P = V² ÷ R</strong></div>

              <div class="note">
                Units:
                <strong>V</strong> (volts),
                <strong>A</strong> (amps),
                <strong>Ω</strong> (ohms),
                <strong>W</strong> (watts).
                And: <strong>mA = A ÷ 1000</strong>, <strong>kΩ = Ω × 1000</strong>.
              </div>
            </div>
          </div>

          <!-- Examples -->
          <div data-panel="examples">
            <div class="box">
              <div class="box-title">
                <h2>Real-World Examples</h2>
                <div class="hint">Practical use cases</div>
              </div>

              <table class="table" aria-label="examples table">
                <thead>
                  <tr>
                    <th>Scenario</th>
                    <th>Given</th>
                    <th>Result</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>12V device with 6Ω load</td>
                    <td>V=12V, R=6Ω</td>
                    <td>I=2A, P=24W</td>
                  </tr>
                  <tr>
                    <td>USB 5V drawing 0.5A</td>
                    <td>V=5V, I=0.5A</td>
                    <td>R=10Ω, P=2.5W</td>
                  </tr>
                  <tr>
                    <td>LED resistor (5V, Vf=2V, 20mA)</td>
                    <td>Vs=5V, Vf=2V, I=20mA</td>
                    <td>R≈150Ω, P≈0.06W</td>
                  </tr>
                  <tr>
                    <td>Heating warning example</td>
                    <td>V=24V, R=2Ω</td>
                    <td>I=12A, P=288W (hot!)</td>
                  </tr>
                </tbody>
              </table>

              <div class="note warn" style="margin-top:10px;">
                Reminder: High power usually means heat. For resistors, choose a watt rating with margin (e.g., 2×).
              </div>
            </div>
          </div>

          <!-- FAQ -->
          <div data-panel="faq">
            <div class="box">
              <div class="box-title">
                <h2>FAQ</h2>
                <div class="hint">Quick answers</div>
              </div>

              <p><strong>Do I need all three (V, I, R)?</strong> No. Any two is enough.</p>
              <p><strong>Why does power matter?</strong> Power tells you heat and whether parts may burn.</p>
              <p><strong>mA vs A?</strong> 1000 mA = 1 A. Use mA for small electronics.</p>
              <p><strong>kΩ vs Ω?</strong> 1 kΩ = 1000 Ω. 1 MΩ = 1,000,000 Ω.</p>
              <p><strong>AC vs DC?</strong> This calculator is for basic DC/resistive calculations (rule-of-thumb).</p>
            </div>
          </div>

          <div class="foot">
            <a href="/">← Back to Home</a>
            <span class="subtitle" style="margin:0;">SEO-safe, no framework</span>
          </div>
        </div>
      </section>
    </main>

    <script>
      // -----------------------
      // Tabs (robust)
      // -----------------------
      const tabs = Array.from(document.querySelectorAll(".tab"));
      const panels = Array.from(document.querySelectorAll("[data-panel]"));

      function setTab(name){
        tabs.forEach(t => {
          const active = t.dataset.tab === name;
          t.setAttribute("aria-selected", active ? "true" : "false");
        });
        panels.forEach(p => {
          const isActive = p.dataset.panel === name;
          p.classList.toggle("active", isActive);
        });
      }

      tabs.forEach(t => {
        t.type = "button";
        t.addEventListener("click", (e) => {
          e.preventDefault();
          setTab(t.dataset.tab);
        });
      });

      const initialTab =
        tabs.find(t => t.getAttribute("aria-selected") === "true")?.dataset.tab
        || tabs[0]?.dataset.tab
        || "calc";
      setTab(initialTab);

      // -----------------------
      // Ohm's Law Calculator
      // -----------------------
      const vValue = document.getElementById("vValue");
      const vUnit  = document.getElementById("vUnit");

      const iValue = document.getElementById("iValue");
      const iUnit  = document.getElementById("iUnit");

      const rValue = document.getElementById("rValue");
      const rUnit  = document.getElementById("rUnit");

      const rounding = document.getElementById("rounding");
      const clearBtn = document.getElementById("clearBtn");

      // outputs
      const statusPill = document.getElementById("statusPill");
      const summaryLine = document.getElementById("summaryLine");

      const vOut = document.getElementById("vOut");
      const iOut = document.getElementById("iOut");
      const rOut = document.getElementById("rOut");
      const pOut = document.getElementById("pOut");

      const vBadge = document.getElementById("vBadge");
      const iBadge = document.getElementById("iBadge");
      const rBadge = document.getElementById("rBadge");

      const vSmall = document.getElementById("vSmall");
      const iSmall = document.getElementById("iSmall");
      const rSmall = document.getElementById("rSmall");

      const recentList = document.getElementById("recentList");
      const copyBtn = document.getElementById("copyBtn");

      const warnPower = document.getElementById("warnPower");

      // LED helper
      const ledVs = document.getElementById("ledVs");
      const ledVf = document.getElementById("ledVf");
      const ledI  = document.getElementById("ledI");
      const useLedBtn = document.getElementById("useLedBtn");

      const recent = [];

      function num(x){
        const v = parseFloat(x);
        return Number.isFinite(v) ? v : NaN;
      }

      function roundTo(value, decimals){
        const d = Number(decimals);
        if (!Number.isFinite(value) || !Number.isFinite(d)) return value;
        const f = Math.pow(10, d);
        return Math.round(value * f) / f;
      }

      // Unit converters -> base units (V, A, Ω)
      function toVolts(value, unit){
        if (!Number.isFinite(value)) return NaN;
        if (unit === "V") return value;
        if (unit === "mV") return value / 1000;
        if (unit === "kV") return value * 1000;
        return NaN;
      }
      function fromVolts(volts, unit){
        if (!Number.isFinite(volts)) return NaN;
        if (unit === "V") return volts;
        if (unit === "mV") return volts * 1000;
        if (unit === "kV") return volts / 1000;
        return NaN;
      }

      function toAmps(value, unit){
        if (!Number.isFinite(value)) return NaN;
        if (unit === "A") return value;
        if (unit === "mA") return value / 1000;
        return NaN;
      }
      function fromAmps(amps, unit){
        if (!Number.isFinite(amps)) return NaN;
        if (unit === "A") return amps;
        if (unit === "mA") return amps * 1000;
        return NaN;
      }

      function toOhms(value, unit){
        if (!Number.isFinite(value)) return NaN;
        if (unit === "Ω") return value;
        if (unit === "kΩ") return value * 1000;
        if (unit === "MΩ") return value * 1_000_000;
        return NaN;
      }
      function fromOhms(ohms, unit){
        if (!Number.isFinite(ohms)) return NaN;
        if (unit === "Ω") return ohms;
        if (unit === "kΩ") return ohms / 1000;
        if (unit === "MΩ") return ohms / 1_000_000;
        return NaN;
      }

      function setStatus(ok, text){
        statusPill.classList.toggle("ok", ok);
        statusPill.classList.toggle("wait", !ok);
        statusPill.textContent = text;
      }

      function pushRecent(text){
        if (!text) return;
        recent.unshift(text);
        if (recent.length > 10) recent.pop();
        renderRecent();
      }

      function renderRecent(){
        if (recent.length === 0){
          recentList.textContent = "No calculations yet.";
          return;
        }
        recentList.innerHTML = recent.map(s => `<div>• ${s}</div>`).join("");
      }

      function formatSI(value, unit, decimals){
        if (!Number.isFinite(value)) return "—";
        const v = roundTo(value, decimals);
        return `${v} ${unit}`;
      }

      function compute(){
        const dec = rounding.value;

        const V_in = toVolts(num(vValue.value), vUnit.value);
        const I_in = toAmps(num(iValue.value), iUnit.value);
        const R_in = toOhms(num(rValue.value), rUnit.value);

        const hasV = Number.isFinite(V_in);
        const hasI = Number.isFinite(I_in);
        const hasR = Number.isFinite(R_in);

        // Need at least 2
        const count = (hasV?1:0) + (hasI?1:0) + (hasR?1:0);

        // Reset UI
        warnPower.style.display = "none";
        vBadge.textContent = vUnit.value;
        iBadge.textContent = iUnit.value;
        rBadge.textContent = rUnit.value;

        if (count < 2){
          setStatus(false, "Waiting");
          summaryLine.textContent = "Enter any two values to calculate.";
          vOut.textContent = "—"; iOut.textContent = "—"; rOut.textContent = "—"; pOut.textContent = "—";
          vSmall.textContent = "—"; iSmall.textContent = "—"; rSmall.textContent = "—";
          return;
        }

        let V = hasV ? V_in : NaN;
        let I = hasI ? I_in : NaN;
        let R = hasR ? R_in : NaN;

        // Solve missing
        if (!hasV && hasI && hasR){
          V = I * R;
        } else if (!hasI && hasV && hasR){
          if (R === 0) { I = NaN; } else I = V / R;
        } else if (!hasR && hasV && hasI){
          if (I === 0) { R = NaN; } else R = V / I;
        } else {
          // if user filled all 3, just use them (still compute power)
        }

        // validate
        const ok = Number.isFinite(V) && Number.isFinite(I) && Number.isFinite(R) && V >= 0 && I >= 0 && R >= 0;
        if (!ok){
          setStatus(false, "Invalid");
          summaryLine.textContent = "Values lead to an invalid result (check zeros/negatives).";
          vOut.textContent = "—"; iOut.textContent = "—"; rOut.textContent = "—"; pOut.textContent = "—";
          vSmall.textContent = "—"; iSmall.textContent = "—"; rSmall.textContent = "—";
          return;
        }

        // Power
        const P = V * I; // W

        // Format outputs in selected units
        const V_display = fromVolts(V, vUnit.value);
        const I_display = fromAmps(I, iUnit.value);
        const R_display = fromOhms(R, rUnit.value);

        vOut.textContent = `${roundTo(V_display, dec)}`;
        iOut.textContent = `${roundTo(I_display, dec)}`;
        rOut.textContent = `${roundTo(R_display, dec)}`;
        pOut.textContent = `${roundTo(P, dec)}`;

        // Small helpers (show base values)
        vSmall.textContent = `Base: ${roundTo(V, dec)} V`;
        iSmall.textContent = `Base: ${roundTo(I, dec)} A`;
        rSmall.textContent = `Base: ${roundTo(R, dec)} Ω`;

        setStatus(true, "Ready");

        // Summary
        const parts = [];
        if (hasV) parts.push(`V=${formatSI(fromVolts(V, vUnit.value), vUnit.value, dec)}`);
        if (hasI) parts.push(`I=${formatSI(fromAmps(I, iUnit.value), iUnit.value, dec)}`);
        if (hasR) parts.push(`R=${formatSI(fromOhms(R, rUnit.value), rUnit.value, dec)}`);

        // If user entered 2, we computed 1 -> say which
        let computedWhat = "";
        if (!hasV) computedWhat = "Voltage";
        else if (!hasI) computedWhat = "Current";
        else if (!hasR) computedWhat = "Resistance";
        else computedWhat = "All";

        summaryLine.textContent =
          computedWhat === "All"
            ? `Using your inputs → Power = ${roundTo(P, dec)} W`
            : `Computed ${computedWhat} → Power = ${roundTo(P, dec)} W`;

        // Warn for high power (simple heuristic)
        if (P >= 10){
          warnPower.style.display = "block";
          warnPower.classList.add("warn");
          warnPower.textContent =
            `Power ≈ ${roundTo(P, dec)} W. That may generate heat — consider component ratings and safety margin.`;
        }

        // recent line
        const recentLine = `V=${roundTo(V, 3)}V · I=${roundTo(I, 3)}A · R=${roundTo(R, 3)}Ω · P=${roundTo(P, 3)}W`;
        pushRecent(recentLine);
      }

      function onAnyInput(){
        compute();
      }

      [vValue, vUnit, iValue, iUnit, rValue, rUnit, rounding].forEach(el => {
        el.addEventListener("input", onAnyInput);
        el.addEventListener("change", onAnyInput);
      });

      clearBtn.addEventListener("click", () => {
        vValue.value = "";
        iValue.value = "";
        rValue.value = "";
        recent.length = 0;
        renderRecent();
        compute();
      });

      copyBtn.addEventListener("click", async () => {
        const text = recent.length ? recent[0] : "";
        if (!text) return;
        try{
          await navigator.clipboard.writeText(text);
          copyBtn.textContent = "Copied";
          setTimeout(() => (copyBtn.textContent = "Copy"), 900);
        }catch(e){
          copyBtn.textContent = "Copy failed";
          setTimeout(() => (copyBtn.textContent = "Copy"), 900);
        }
      });

      // LED helper: R = (Vs - Vf) / I
      useLedBtn.addEventListener("click", () => {
        const Vs = num(ledVs.value);
        const Vf = num(ledVf.value);
        const I_mA = num(ledI.value);

        if (!Number.isFinite(Vs) || !Number.isFinite(Vf) || !Number.isFinite(I_mA) || I_mA <= 0){
          ledNote.textContent = "Please enter Vs, Vf, and mA (mA must be > 0).";
          return;
        }

        const I_A = I_mA / 1000;
        const R = (Vs - Vf) / I_A;

        if (!Number.isFinite(R) || R < 0){
          ledNote.textContent = "Values lead to an invalid resistor value (check Vs >= Vf).";
          return;
        }

        // Fill main calculator: V = Vs - Vf, I = target current, R = computed
        vValue.value = roundTo(Vs - Vf, 6);
        vUnit.value = "V";

        iValue.value = roundTo(I_mA, 6);
        iUnit.value = "mA";

        rValue.value = roundTo(R, 6);
        rUnit.value = "Ω";

        ledNote.textContent = `Filled: V=${roundTo(Vs - Vf, 3)}V, I=${roundTo(I_mA, 3)}mA, R≈${roundTo(R, 1)}Ω`;
        compute();
      });

      // init
      renderRecent();
      compute();
    </script>
  </body>
</html>
